import{r as s,j as e,Y as U,a as r}from"./app-B_mFRvJE.js";import{A as B}from"./AuthenticatedLayout-CdDMuq1s.js";import{F as o,R as q,I as j}from"./index-BQo1PTkC.js";import{s as L,M as g,C as z}from"./index-cqHvwMkD.js";import{F as v,S as H,R as K,P as V,a as G}from"./Table-B-thMrVn.js";import{B as m}from"./button-DCeV_hfy.js";import{R as J}from"./useForceUpdate-Ds-AvRjX.js";import"./ApplicationLogo-B1Ul7giX.js";import"./transition-Be---51y.js";import"./index-C7ePuH_M.js";const{Column:d}=v;function de({auth:C}){const[n]=o.useForm(),[I,w]=s.useState([]),[S,u]=s.useState(!1),[N,A]=s.useState(0),[b,i]=s.useState(!1),[p,R]=s.useState(5),[x,k]=s.useState(1),[f,Q]=s.useState(""),[c,W]=s.useState({}),[y,h]=s.useState(0),l=async()=>{u(!0);const t=[`perpage=${p}`,`search=${f}`,`page=${x}`].join("&");try{const a=await r.get(`/admin/get-academic-years?${t}`);w(a.data.data),A(a.data.total),u(!1)}catch(a){console.log(a)}};s.useEffect(()=>{l()},[p,f,x]);const F=(t,a)=>{k(t),R(a)},[P,Y]=L.useNotification(),_=(t,a,M)=>{P.info({message:a,description:M,placement:t})},D=async t=>{try{const a=await r.get(`/admin/academic-years/${t}`);n.setFields([{name:"academic_year_code",value:a.data.academic_year_code},{name:"academic_year_description",value:a.data.academic_year_description},{name:"active",value:a.data.active}])}catch(a){console.log(a)}},E=()=>{h(0),i(!0)},T=t=>{h(t),i(!0),D(t)},$=async t=>{(await r.delete("/admin/academic-years/"+t)).data.status==="deleted"&&l()},O=async t=>{if(console.log(t),y>0)try{(await r.put("/admin/academic-years/"+y,t)).data.status==="updated"&&(_("bottomRight","Updated!","User successfully update."),n.resetFields(),i(!1),l())}catch(a){a.response.status}else try{(await r.post("/admin/academic-years",t)).data.status==="saved"&&(_("bottomRight","Saved!","User successfully saved."),n.resetFields(),i(!1),l())}catch(a){a.response.status}};return e.jsxs(B,{user:C.user,children:[e.jsx(U,{title:"User Management"}),Y,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md\r
					sm:w-[740px]\r
					md:w-[990px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Academic Year"}),e.jsxs("div",{children:[e.jsxs(v,{dataSource:I,loading:S,rowKey:t=>t.academic_year_id,pagination:!1,children:[e.jsx(d,{title:"Id",dataIndex:"academic_year_id"}),e.jsx(d,{title:"Code",dataIndex:"academic_year_code"},"academic_year_code"),e.jsx(d,{title:"Description",dataIndex:"academic_year_description"},"academic_year_description"),e.jsx(d,{title:"Active",dataIndex:"active",render:t=>t?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(d,{title:"Action",render:(t,a)=>e.jsxs(H,{size:"small",children:[e.jsx(m,{shape:"circle",icon:e.jsx(K,{}),onClick:()=>T(a.academic_year_id)}),e.jsx(m,{danger:!0,shape:"circle",onClick:()=>g.confirm({title:"Delete?",icon:e.jsx(q,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){$(a.academic_year_id)}}),icon:e.jsx(J,{})})]})},"action")]}),e.jsx(V,{className:"mt-4",onChange:F,defaultCurrent:1,total:N}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(m,{className:"ml-auto",shape:"round",icon:e.jsx(G,{}),type:"primary",onClick:E,children:"New"})})]})]})}),e.jsxs(g,{open:b,title:"ACADEMIC YEAR INFORMATION",okText:"Save",cancelText:"Cancel",okButtonProps:{autoFocus:!0,htmlType:"submit"},onCancel:()=>i(!1),destroyOnClose:!0,modalRender:t=>e.jsx(o,{layout:"vertical",form:n,name:"form_in_modal",autoComplete:"off",initialValues:{academic_year_code:"",academic_year_desctiption:"",active:!0},clearOnDestroy:!0,onFinish:a=>O(a),children:t}),children:[e.jsx(o.Item,{name:"academic_year_code",label:"Academic Year Code",validateStatus:c.academic_year_code?"error":"",help:c.academic_year_code?c.academic_year_code[0]:"",rules:[{required:!0,message:"Please input academic year code!"}],children:e.jsx(j,{placeholder:"Academic Year Code"})}),e.jsx(o.Item,{name:"academic_year_description",label:"Academic Year Description",validateStatus:c.academic_year_description?"error":"",help:c.academic_year_description?c.academic_year_description[0]:"",rules:[{required:!0,message:"Please input academic year description!"}],children:e.jsx(j,{placeholder:"Academic Year Description"})}),e.jsx(o.Item,{name:"active",valuePropName:"checked",children:e.jsx(z,{children:"Active"})})]})]})}export{de as default};
