import{r,m as B,R as Y,j as e,Y as G,a as d}from"./app-CzuViuCp.js";import{A as W}from"./AuthenticatedLayout-DRS6rfkw.js";import{F as l,R as H}from"./index-CINCekdf.js";import{s as K,M as I,S as R,C as V}from"./index-DL7ttQqv.js";import{F as N,S as J,R as Q,P as X,a as Z}from"./FileAddOutlined-D0MPkBBw.js";import{I as ee,B as f}from"./button-D7hfL9Ag.js";import{R as ae}from"./DeleteOutlined-DWAgdMJ2.js";import{I as m,R as S}from"./index-D9GDua4e.js";import"./ApplicationLogo-rT3vg_nV.js";import"./transition-DdLwZoAM.js";import"./EyeOutlined-C5Y5mOys.js";import"./index-DkbX3zFA.js";var se={icon:function(n,i){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M81.8 537.8a60.3 60.3 0 010-51.5C176.6 286.5 319.8 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c-192.1 0-335.4-100.5-430.2-300.2z",fill:i}},{tag:"path",attrs:{d:"M512 258c-161.3 0-279.4 81.8-362.7 254C232.6 684.2 350.7 766 512 766c161.4 0 279.5-81.8 362.7-254C791.4 339.8 673.3 258 512 258zm-4 430c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z",fill:i}},{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258s279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z",fill:n}},{tag:"path",attrs:{d:"M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z",fill:n}}]}},name:"eye",theme:"twotone"},te=function(n,i){return r.createElement(ee,B({},n,{ref:i,icon:se}))},E=r.forwardRef(te);const{Column:o}=N;function ge({auth:x}){const[n]=l.useForm(),[i,y]=r.useState([]),[b,h]=r.useState(!1),[T,P]=r.useState(0),[C,c]=r.useState(!1);Y.useState(!1);const[j,M]=r.useState(10),[g,A]=r.useState(1),[F,re]=r.useState(""),[t,le]=r.useState({}),[p,v]=r.useState(0),u=async()=>{h(!0);const s=[`perpage=${j}`,`page=${g}`].join("&");try{const a=await d.get(`/admin/get-users?${s}`);y(a.data.data),P(a.data.total),h(!1)}catch(a){console.log(a)}};r.useEffect(()=>{u()},[j,F,g]);const U=(s,a)=>{A(s),M(a)},[D,_]=K.useNotification(),w=(s,a,L)=>{D.info({message:a,description:L,placement:s})},k=async s=>{try{const a=await d.get(`/admin/users/${s}`);n.setFields([{name:"username",value:a.data.username},{name:"name",value:a.data.name},{name:"email",value:a.data.email},{name:"sex",value:a.data.sex},{name:"role",value:a.data.role},{name:"active",value:a.data.active}])}catch(a){console.log(a)}},O=()=>{v(0),c(!0)},$=s=>{v(s),c(!0),k(s)},z=async s=>{(await d.delete("/admin/users/{id}")).data.status==="deleted"&&u()},q=async s=>{if(console.log(s),p>0)try{(await d.put("/admin/users/"+p,s)).data.status==="updated"&&(w("bottomRight","Updated!","User successfully update."),n.resetFields(),c(!1),u())}catch(a){a.response.status}else try{(await d.post("/admin/users",s)).data.status==="saved"&&(w("bottomRight","Saved!","User successfully save."),n.resetFields(),c(!1),u())}catch(a){a.response.status}};return e.jsxs(W,{user:x.user,children:[e.jsx(G,{title:"User Management"}),_,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md
					sm:w-[740px]
					md:w-[990px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Users"}),e.jsxs("div",{children:[e.jsxs(N,{dataSource:i,loading:b,rowKey:s=>s.user_id,pagination:!1,children:[e.jsx(o,{title:"Id",dataIndex:"user_id"}),e.jsx(o,{title:"Username",dataIndex:"username"},"username"),e.jsx(o,{title:"Name",dataIndex:"name"},"name"),e.jsx(o,{title:"Email",dataIndex:"email"},"email"),e.jsx(o,{title:"Sex",dataIndex:"sex"},"sex"),e.jsx(o,{title:"Role",dataIndex:"role"},"role"),e.jsx(o,{title:"Active",dataIndex:"active",render:(s,a)=>a?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(o,{title:"Action",render:(s,a)=>e.jsxs(J,{size:"small",children:[e.jsx(f,{shape:"circle",icon:e.jsx(Q,{}),onClick:()=>$(a.user_id)}),e.jsx(f,{danger:!0,shape:"circle",onClick:()=>I.confirm({title:"Delete?",icon:e.jsx(H,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){z(a.user_id)}}),icon:e.jsx(ae,{})})]})},"action")]}),e.jsx(X,{className:"mt-4",onChange:U,defaultCurrent:1,total:T}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(f,{className:"ml-auto",icon:e.jsx(Z,{}),type:"primary",onClick:O,children:"New"})})]})]})}),e.jsxs(I,{open:C,title:"USER INFORMATION",okText:"Save",cancelText:"Cancel",okButtonProps:{autoFocus:!0,htmlType:"submit"},onCancel:()=>c(!1),destroyOnClose:!0,modalRender:s=>e.jsx(l,{layout:"vertical",form:n,name:"form_in_modal",autoComplete:"off",initialValues:{username:"",password:"",email:"",name:"",sex:"MALE",role:"USER",active:!0},clearOnDestroy:!0,onFinish:a=>q(a),children:s}),children:[e.jsx(l.Item,{name:"username",label:"Username",validateStatus:t.username?"error":"",help:t.username?t.username[0]:"",rules:[{required:!0,message:"Please input username!"}],children:e.jsx(m,{placeholder:"Username"})}),p<1?e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{name:"password",label:"Password",validateStatus:t.password?"error":"",help:t.password?t.password[0]:"",rules:[{required:!0,message:"Please input Password!"}],children:e.jsx(m.Password,{iconRender:s=>s?e.jsx(E,{}):e.jsx(S,{}),placeholder:"Re-type Password"})}),e.jsx(l.Item,{name:"password_confirmation",label:"Re-type Password",validateStatus:t.password_confirmation?"error":"",help:t.password_confirmation?t.password_confirmation[0]:"",rules:[{required:!0,message:"Please input Re-type Password!"}],children:e.jsx(m.Password,{iconRender:s=>s?e.jsx(E,{}):e.jsx(S,{}),placeholder:"Re-type Password"})})]}):"",e.jsx(l.Item,{name:"name",label:"Name",validateStatus:t.name?"error":"",help:t.name?t.name[0]:"",rules:[{required:!0,message:"Please input name!"}],children:e.jsx(m,{placeholder:"Name"})}),e.jsx(l.Item,{name:"email",label:"Email",validateStatus:t.email?"error":"",help:t.email?t.email[0]:"",rules:[{required:!0,message:"Please input email!"}],children:e.jsx(m,{placeholder:"Email"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(l.Item,{name:"sex",label:"Sex",className:"w-full",validateStatus:t.sex?"error":"",help:t.sex?t.sex[0]:"",rules:[{required:!0,message:"Please select sex!"}],children:e.jsx(R,{options:[{value:"MALE",label:"MALE"},{value:"FEMALE",label:"FEMALE"}]})}),e.jsx(l.Item,{name:"role",label:"Role",className:"w-full",validateStatus:t.role?"error":"",help:t.role?t.role[0]:"",rules:[{required:!0,message:"Please select role!"}],children:e.jsx(R,{options:[{value:"STUDENT",label:"STUDENT"},{value:"WRITER",label:"WRITER"},{value:"EDITOR",label:"EDITOR"},{value:"DESIGNER",label:"DESIGNER"},{value:"ADMINISTRATOR",label:"ADMINISTRATOR"}]})})]}),e.jsx(l.Item,{name:"active",valuePropName:"checked",children:e.jsx(V,{children:"Active"})})]})]})}export{ge as default};
