import{r as s,j as e,Y as F,a as h,y as p}from"./app-CXZ400t5.js";import{A as P}from"./AuthenticatedLayout-DAWbsm77.js";import{F as $,I as T,R as D}from"./index-CLpyb7ID.js";import{s as M,M as Y}from"./index-BsHh8Egl.js";import{B as i}from"./button-BP502W3E.js";import{F as f,S as O,R as B,P as H,a as L}from"./Table-g--Ge7nA.js";import{R as U}from"./useForceUpdate-C1cN6tMO.js";import"./ApplicationLogo-texIT_2Z.js";import"./transition-DBNkxpKN.js";import"./index-V22XmuM1.js";const{Column:n}=f;function ae({auth:j}){$.useForm();const[g,y]=s.useState([]),[w,o]=s.useState(!1),[N,z]=s.useState(0),[l,S]=s.useState(10),[d,I]=s.useState(1),[x,v]=s.useState("");s.useState({}),s.useState(0);const c=async()=>{o(!0);const t=[`perpage=${l}`,`search=${x}`,`page=${d}`].join("&");try{const a=await h.get(`/admin/get-articles?${t}`);y(a.data.data),o(!1)}catch{o(!1)}};s.useEffect(()=>{c()},[l,d]);const C=(t,a)=>{I(t),S(a)},[K,_]=M.useNotification(),b=(t,a)=>{if(t.length>0){const r=t.split(" ");return r.length>a?r.slice(0,a).join(" ")+"...":t}else return""},k=()=>{p.visit("/admin/articles/create")},A=t=>{p.visit("/admin/articles/"+t+"/edit")},R=async t=>{(await h.delete("/admin/articles/"+t)).data.status==="deleted"&&c()},E=()=>{c()};return e.jsxs(P,{user:j.user,children:[e.jsx(F,{title:"User Management"}),_,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md\r
					sm:w-[740px]\r
					md:w-[990px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Articles"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(T,{placeholder:"Search Title",value:x,onChange:t=>v(t.target.value)}),e.jsx(i,{type:"primary",onClick:E,children:"SEARCH"})]}),e.jsxs("div",{children:[e.jsxs(f,{dataSource:g,loading:w,rowKey:t=>t.article_id,pagination:!1,children:[e.jsx(n,{title:"Id",dataIndex:"article_id"}),e.jsx(n,{title:"Author",dataIndex:"author",render:(t,a)=>{var r;return e.jsx(e.Fragment,{children:a.academic_year?(r=a.academic_year)==null?void 0:r.academic_year_code:""})}},"author"),e.jsx(n,{title:"Title",dataIndex:"title"},"title"),e.jsx(n,{title:"Excerpt",dataIndex:"excerpt",render:t=>e.jsx("span",{children:t?b(t,10):""})},"excerpt"),e.jsx(n,{title:"Author",dataIndex:"author",render:(t,a)=>{var r,u,m;return e.jsxs(e.Fragment,{children:[(r=a.author)!=null&&r.lname?((u=a.author)==null?void 0:u.lname)+",":""," ",(m=a.author)==null?void 0:m.fname]})}},"author"),e.jsx(n,{title:"Active",dataIndex:"active",render:(t,a)=>a?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(n,{title:"Featured",dataIndex:"is_featured",render:t=>t?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"is_featured"),e.jsx(n,{title:"Action",render:(t,a)=>e.jsxs(O,{size:"small",children:[e.jsx(i,{shape:"circle",icon:e.jsx(B,{}),onClick:()=>A(a.article_id)}),e.jsx(i,{danger:!0,shape:"circle",onClick:()=>Y.confirm({title:"Delete?",icon:e.jsx(D,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){R(a.article_id)}}),icon:e.jsx(U,{})})]})},"action")]}),e.jsx(H,{className:"mt-4",onChange:C,defaultCurrent:1,total:N}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(i,{className:"ml-auto",shape:"round",icon:e.jsx(L,{}),type:"primary",onClick:k,children:"New"})})]})]})})]})}export{ae as default};
