import{r as s,R as M,j as e,Y,a as n}from"./app-BiwK4mYR.js";import{A as U}from"./AuthenticatedLayout-DwMXeAF5.js";import{F as l,R as z,I as v}from"./index-Ctv13m9L.js";import{j as L,C as q}from"./index-CMzm6uAZ.js";import{F as S,S as G,R as H,M as C,P as K,a as V}from"./Table-C-7LfyBm.js";import{B as x}from"./button-DPgAOse5.js";import{R as J}from"./useForceUpdate-D_69VEQw.js";import"./ApplicationLogo-B0qwfKja.js";import"./transition-CD3hGJJ9.js";import"./index-CqgVqaCo.js";const{Column:d}=S,{Search:Q}=v;function de({auth:N}){const[i]=l.useForm(),[w,I]=s.useState([]),[p,u]=s.useState(!1),[R,W]=s.useState(0),[b,o]=s.useState(!1);M.useState(!1);const[h,k]=s.useState(10),[f,F]=s.useState(1),[P,X]=s.useState(""),[m,Z]=s.useState({}),[y,j]=s.useState(0),r=async()=>{u(!0);const t=[`search=${document.getElementById("search").value}`,`perpage=${h}`,`page=${f}`].join("&");try{const c=await n.get(`/admin/get-categories?${t}`);I(c.data.data),u(!1)}catch(c){u(!1),console.log(c)}};s.useEffect(()=>{r()},[h,P,f]);const T=(a,t)=>{F(a),k(t)},[A,E]=L.useNotification(),g=(a,t,c)=>{A.info({message:t,description:c,placement:a})},O=async a=>{try{const t=await n.get(`/admin/categories/${a}`);i.setFields([{name:"category",value:t.data.category},{name:"active",value:t.data.active}])}catch(t){console.log(t)}},$=()=>{j(0),o(!0)},_=a=>{j(a),o(!0),O(a)},D=async a=>{(await n.delete("/admin/categories/"+a)).data.status==="deleted"&&(g("bottomRight","Deleted!","Category successfully deleted."),r())},B=async a=>{if(y>0)try{(await n.put("/admin/categories/"+y,a)).data.status==="updated"&&(g("bottomRight","Updated!","Category successfully update."),i.resetFields(),o(!1),r())}catch(t){t.response.status}else try{(await n.post("/admin/categories",a)).data.status==="saved"&&(g("bottomRight","Saved!","Category successfully save."),i.resetFields(),o(!1),r())}catch(t){t.response.status}};return e.jsxs(U,{user:N.user,children:[e.jsx(Y,{title:"Category Management"}),E,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md\r
					sm:w-[740px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Category"}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2",children:e.jsx(Q,{placeholder:"Search...",enterButton:"Search",size:"large",id:"search",loading:p,onSearch:r})}),e.jsxs(S,{dataSource:w,loading:p,rowKey:a=>a.category_id,pagination:!1,children:[e.jsx(d,{title:"Id",dataIndex:"category_id"}),e.jsx(d,{title:"Category",dataIndex:"category"},"category"),e.jsx(d,{title:"Active",dataIndex:"active",render:a=>a?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(d,{title:"Action",render:(a,t)=>e.jsxs(G,{size:"small",children:[e.jsx(x,{shape:"circle",icon:e.jsx(H,{}),onClick:()=>_(t.category_id)}),e.jsx(x,{danger:!0,shape:"circle",onClick:()=>C.confirm({title:"Delete?",icon:e.jsx(z,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){D(t.category_id)}}),icon:e.jsx(J,{})})]})},"action")]}),e.jsx(K,{className:"mt-4",onChange:T,defaultCurrent:1,total:R}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(x,{className:"ml-auto",icon:e.jsx(V,{}),type:"primary",onClick:$,children:"New"})})]})]})}),e.jsxs(C,{open:b,title:"CATEGORY INFORMATION",okText:"Save",cancelText:"Cancel",okButtonProps:{autoFocus:!0,htmlType:"submit"},onCancel:()=>o(!1),destroyOnClose:!0,modalRender:a=>e.jsx(l,{layout:"vertical",form:i,name:"form_in_modal",autoComplete:"off",initialValues:{category:"",active:!0},clearOnDestroy:!0,onFinish:t=>B(t),children:a}),children:[e.jsx(l.Item,{name:"category",label:"Category",validateStatus:m.category?"error":"",help:m.category?m.category[0]:"",rules:[{required:!0,message:"Please input category!"}],children:e.jsx(v,{placeholder:"Category"})}),e.jsx(l.Item,{name:"active",valuePropName:"checked",children:e.jsx(q,{children:"Active"})})]})]})}export{de as default};
