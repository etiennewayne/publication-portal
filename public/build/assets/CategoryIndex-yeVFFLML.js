import{r as s,R as Y,j as e,Y as U,a as n}from"./app-CTSGggcn.js";import{A as z}from"./AuthenticatedLayout-9q3GuFFQ.js";import{F as l,R as L,I as S}from"./index-clDVFp_7.js";import{s as G,M as v,C as H}from"./index-B1CS0Ufp.js";import{F as N,S as K,R as V,P as q,a as J}from"./Table-BOtiTSuI.js";import{B as f}from"./button-DEWqIzMx.js";import{R as Q}from"./useForceUpdate-CKnNkVl7.js";import"./ApplicationLogo-hVKKvjJz.js";import"./transition-BZWZbjgq.js";import"./index-Ch5Q590S.js";const{Column:d}=N,{Search:W}=S;function de({auth:w}){const[i]=l.useForm(),[I,R]=s.useState([]),[h,u]=s.useState(!1),[b,X]=s.useState(0),[k,o]=s.useState(!1);Y.useState(!1);const[y,F]=s.useState(10),[j,P]=s.useState(1),[T,Z]=s.useState(""),[m,g]=s.useState({}),[x,C]=s.useState(0),r=async()=>{u(!0);const t=[`search=${document.getElementById("search").value}`,`perpage=${y}`,`page=${j}`].join("&");try{const c=await n.get(`/admin/get-categories?${t}`);R(c.data.data),u(!1)}catch(c){u(!1),console.log(c)}};s.useEffect(()=>{r()},[y,T,j]);const A=(a,t)=>{P(a),F(t)},[E,O]=G.useNotification(),p=(a,t,c)=>{E.info({message:t,description:c,placement:a})},$=async a=>{try{const t=await n.get(`/admin/categories/${a}`);i.setFields([{name:"category",value:t.data.category},{name:"active",value:!!t.data.active}])}catch(t){console.log(t)}},_=()=>{C(0),o(!0)},D=a=>{g({}),C(a),o(!0),$(a)},B=async a=>{(await n.delete("/admin/categories/"+a)).data.status==="deleted"&&(p("bottomRight","Deleted!","Category successfully deleted."),r())},M=async a=>{if(console.log(x),x>0)try{(await n.put("/admin/categories/"+x,a)).data.status==="updated"&&(p("bottomRight","Updated!","Category successfully update."),i.resetFields(),o(!1),r())}catch(t){t.response.status===422&&g(t.response.data.errors)}else try{(await n.post("/admin/categories",a)).data.status==="saved"&&(p("bottomRight","Saved!","Category successfully save."),i.resetFields(),o(!1),r())}catch(t){t.response.status===422&&g(t.response.data.errors)}};return e.jsxs(z,{user:w.user,children:[e.jsx(U,{title:"Category Management"}),O,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md\r
					sm:w-[740px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Category"}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2",children:e.jsx(W,{placeholder:"Search...",enterButton:"Search",size:"large",id:"search",loading:h,onSearch:r})}),e.jsxs(N,{dataSource:I,loading:h,rowKey:a=>a.category_id,pagination:!1,children:[e.jsx(d,{title:"Id",dataIndex:"category_id"}),e.jsx(d,{title:"Category",dataIndex:"category"},"category"),e.jsx(d,{title:"Active",dataIndex:"active",render:a=>a?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(d,{title:"Action",render:(a,t)=>e.jsxs(K,{size:"small",children:[e.jsx(f,{shape:"circle",icon:e.jsx(V,{}),onClick:()=>D(t.category_id)}),e.jsx(f,{danger:!0,shape:"circle",onClick:()=>v.confirm({title:"Delete?",icon:e.jsx(L,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){B(t.category_id)}}),icon:e.jsx(Q,{})})]})},"action")]}),e.jsx(q,{className:"mt-4",onChange:A,defaultCurrent:1,total:b}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(f,{className:"ml-auto",icon:e.jsx(J,{}),type:"primary",onClick:_,children:"New"})})]})]})}),e.jsxs(v,{open:k,title:"CATEGORY INFORMATION",okText:"Save",cancelText:"Cancel",okButtonProps:{autoFocus:!0,htmlType:"submit"},onCancel:()=>o(!1),destroyOnClose:!0,modalRender:a=>e.jsx(l,{layout:"vertical",form:i,name:"form_in_modal",autoComplete:"off",initialValues:{category:"",active:!0},clearOnDestroy:!0,onFinish:t=>M(t),children:a}),children:[e.jsx(l.Item,{name:"category",label:"Category",validateStatus:m.category?"error":"",help:m.category?m.category[0]:"",children:e.jsx(S,{placeholder:"Category"})}),e.jsx(l.Item,{name:"active",valuePropName:"checked",children:e.jsx(H,{children:"Active"})})]})]})}export{de as default};
