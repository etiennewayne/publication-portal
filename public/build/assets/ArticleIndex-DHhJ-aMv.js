import{r as s,j as e,Y as P,a as p,z as h}from"./app-C_35CnGi.js";import{A as $}from"./AuthenticatedLayout-LARI5ay4.js";import{F as T,R as D}from"./index-DIQTCdUJ.js";import{s as M,M as Y}from"./index-6ufz01OF.js";import{I as O}from"./index-BFhdJJAC.js";import{B as i}from"./button-WSihWei9.js";import{F as f,S as z,R as B,P as H,a as L}from"./FileAddOutlined-PghgUAL0.js";import{R as U}from"./DeleteOutlined-Cg3Y78uN.js";import"./ApplicationLogo-41eVRYNn.js";import"./transition-DGq7PIl-.js";import"./EyeOutlined-Cjdgiodv.js";import"./index-Cjboe2qx.js";const{Column:n}=f;function re({auth:j}){T.useForm();const[g,y]=s.useState([]),[w,o]=s.useState(!1),[N,S]=s.useState(0),[l,I]=s.useState(10),[d,v]=s.useState(1),[x,C]=s.useState("");s.useState({}),s.useState(0);const c=async()=>{o(!0);const t=[`perpage=${l}`,`search=${x}`,`page=${d}`].join("&");try{const a=await p.get(`/admin/get-articles?${t}`);y(a.data.data),S(a.data.total),o(!1)}catch{o(!1)}};s.useEffect(()=>{c()},[l,d]);const _=(t,a)=>{v(t),I(a)},[K,b]=M.useNotification(),k=(t,a)=>{if(t.length>0){const r=t.split(" ");return r.length>a?r.slice(0,a).join(" ")+"...":t}else return""},A=()=>{h.visit("/admin/articles/create")},R=t=>{h.visit("/admin/articles/"+t+"/edit")},E=async t=>{(await p.delete("/admin/articles/"+t)).data.status==="deleted"&&c()},F=()=>{c()};return e.jsxs($,{user:j.user,children:[e.jsx(P,{title:"User Management"}),b,e.jsx("div",{className:"flex my-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md\r
					sm:w-[740px]\r
					md:w-[990px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Articles"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(O,{placeholder:"Search Title",value:x,onChange:t=>C(t.target.value)}),e.jsx(i,{type:"primary",onClick:F,children:"SEARCH"})]}),e.jsxs("div",{children:[e.jsxs(f,{dataSource:g,loading:w,rowKey:t=>t.article_id,pagination:!1,children:[e.jsx(n,{title:"Id",dataIndex:"article_id"}),e.jsx(n,{title:"Author",dataIndex:"author",render:(t,a)=>{var r;return e.jsx(e.Fragment,{children:a.academic_year?(r=a.academic_year)==null?void 0:r.academic_year_code:""})}},"author"),e.jsx(n,{title:"Title",dataIndex:"title"},"title"),e.jsx(n,{title:"Excerpt",dataIndex:"excerpt",render:t=>e.jsx("span",{children:t?k(t,10):""})},"excerpt"),e.jsx(n,{title:"Author",dataIndex:"author",render:(t,a)=>{var r,m,u;return e.jsxs(e.Fragment,{children:[(r=a.author)!=null&&r.lname?((m=a.author)==null?void 0:m.lname)+",":""," ",(u=a.author)==null?void 0:u.fname]})}},"author"),e.jsx(n,{title:"Active",dataIndex:"active",render:(t,a)=>a?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(n,{title:"Featured",dataIndex:"is_featured",render:t=>t?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"is_featured"),e.jsx(n,{title:"Action",render:(t,a)=>e.jsxs(z,{size:"small",children:[e.jsx(i,{shape:"circle",icon:e.jsx(B,{}),onClick:()=>R(a.article_id)}),e.jsx(i,{danger:!0,shape:"circle",onClick:()=>Y.confirm({title:"Delete?",icon:e.jsx(D,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){E(a.article_id)}}),icon:e.jsx(U,{})})]})},"action")]}),e.jsx(H,{className:"mt-4",onChange:_,defaultCurrent:1,total:N}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(i,{className:"ml-auto",shape:"round",icon:e.jsx(L,{}),type:"primary",onClick:A,children:"New"})})]})]})})]})}export{re as default};
