import{r as s,j as e,Y as M,a as r}from"./app-BI8Ne9ff.js";import{A as U}from"./AuthenticatedLayout-BYac364X.js";import{F as o,R as B,I as j}from"./index-ByQfiS-7.js";import{s as q,M as g,C as L}from"./index-yb4ZVewy.js";import{F as v,S as z,R as H,P as K,a as V}from"./Table-6aMC2VZp.js";import{B as m}from"./button-DeaQzerq.js";import{R as G}from"./useForceUpdate-Cd51SA6V.js";import"./ApplicationLogo-CXeGTjJ0.js";import"./transition-lu4uRQEx.js";import"./index-B5fXJA0Y.js";const{Column:n}=v;function ne({auth:C}){const[d]=o.useForm(),[I,w]=s.useState([]),[S,u]=s.useState(!1),[N,J]=s.useState(0),[A,i]=s.useState(!1),[p,b]=s.useState(10),[x,R]=s.useState(1),[f,Q]=s.useState(""),[c,W]=s.useState({}),[y,h]=s.useState(0),l=async()=>{u(!0);const t=[`perpage=${p}`,`search=${f}`,`page=${x}`].join("&");try{const a=await r.get(`/admin/get-academic-years?${t}`);w(a.data.data),u(!1)}catch(a){console.log(a)}};s.useEffect(()=>{l()},[p,f,x]);const k=(t,a)=>{R(t),b(a)},[F,P]=q.useNotification(),_=(t,a,O)=>{F.info({message:a,description:O,placement:t})},Y=async t=>{try{const a=await r.get(`/admin/academic-years/${t}`);d.setFields([{name:"academic_year_code",value:a.data.academic_year_code},{name:"academic_year_description",value:a.data.academic_year_description},{name:"active",value:a.data.active}])}catch(a){console.log(a)}},D=()=>{h(0),i(!0)},E=t=>{h(t),i(!0),Y(t)},T=async t=>{(await r.delete("/admin/academic-years/"+t)).data.status==="deleted"&&l()},$=async t=>{if(console.log(t),y>0)try{(await r.put("/admin/academic-years/"+y,t)).data.status==="updated"&&(_("bottomRight","Updated!","User successfully update."),d.resetFields(),i(!1),l())}catch(a){a.response.status}else try{(await r.post("/admin/academic-years",t)).data.status==="saved"&&(_("bottomRight","Saved!","User successfully saved."),d.resetFields(),i(!1),l())}catch(a){a.response.status}};return e.jsxs(U,{user:C.user,children:[e.jsx(M,{title:"User Management"}),P,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md\r
					sm:w-[740px]\r
					md:w-[990px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Academic Year"}),e.jsxs("div",{children:[e.jsxs(v,{dataSource:I,loading:S,rowKey:t=>t.academic_year_id,pagination:!1,children:[e.jsx(n,{title:"Id",dataIndex:"academic_year_id"}),e.jsx(n,{title:"Code",dataIndex:"academic_year_code"},"academic_year_code"),e.jsx(n,{title:"Description",dataIndex:"academic_year_description"},"academic_year_description"),e.jsx(n,{title:"Active",dataIndex:"active",render:t=>t?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(n,{title:"Action",render:(t,a)=>e.jsxs(z,{size:"small",children:[e.jsx(m,{shape:"circle",icon:e.jsx(H,{}),onClick:()=>E(a.academic_year_id)}),e.jsx(m,{danger:!0,shape:"circle",onClick:()=>g.confirm({title:"Delete?",icon:e.jsx(B,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){T(a.academic_year_id)}}),icon:e.jsx(G,{})})]})},"action")]}),e.jsx(K,{className:"mt-4",onChange:k,defaultCurrent:1,total:N}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(m,{className:"ml-auto",shape:"round",icon:e.jsx(V,{}),type:"primary",onClick:D,children:"New"})})]})]})}),e.jsxs(g,{open:A,title:"ACADEMIC YEAR INFORMATION",okText:"Save",cancelText:"Cancel",okButtonProps:{autoFocus:!0,htmlType:"submit"},onCancel:()=>i(!1),destroyOnClose:!0,modalRender:t=>e.jsx(o,{layout:"vertical",form:d,name:"form_in_modal",autoComplete:"off",initialValues:{academic_year_code:"",academic_year_desctiption:"",active:!0},clearOnDestroy:!0,onFinish:a=>$(a),children:t}),children:[e.jsx(o.Item,{name:"academic_year_code",label:"Academic Year Code",validateStatus:c.academic_year_code?"error":"",help:c.academic_year_code?c.academic_year_code[0]:"",rules:[{required:!0,message:"Please input academic year code!"}],children:e.jsx(j,{placeholder:"Academic Year Code"})}),e.jsx(o.Item,{name:"academic_year_description",label:"Academic Year Description",validateStatus:c.academic_year_description?"error":"",help:c.academic_year_description?c.academic_year_description[0]:"",rules:[{required:!0,message:"Please input academic year description!"}],children:e.jsx(j,{placeholder:"Academic Year Description"})}),e.jsx(o.Item,{name:"active",valuePropName:"checked",children:e.jsx(L,{children:"Active"})})]})]})}export{ne as default};
