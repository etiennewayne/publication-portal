import{r as s,j as e,Y as A,a as m,y as p}from"./app-BiwK4mYR.js";import{A as E}from"./AuthenticatedLayout-DwMXeAF5.js";import{F,R as P}from"./index-Ctv13m9L.js";import{j as $}from"./index-CMzm6uAZ.js";import{F as f,S as T,R as D,M,P as Y,a as O}from"./Table-C-7LfyBm.js";import{B as o}from"./button-DPgAOse5.js";import{R as B}from"./useForceUpdate-D_69VEQw.js";import"./ApplicationLogo-B0qwfKja.js";import"./transition-CD3hGJJ9.js";import"./index-CqgVqaCo.js";const{Column:n}=f;function ee({auth:h}){F.useForm();const[j,g]=s.useState([]),[w,i]=s.useState(!1),[N,L]=s.useState(0),[l,y]=s.useState(10),[c,S]=s.useState(1),[b,U]=s.useState("");s.useState({}),s.useState(0);const d=async()=>{i(!0);const t=[`perpage=${l}`,`page=${c}`].join("&");try{const a=await m.get(`/admin/get-articles?${t}`);g(a.data.data),i(!1)}catch{i(!1)}};s.useEffect(()=>{d()},[l,b,c]);const I=(t,a)=>{S(t),y(a)},[z,v]=$.useNotification(),C=(t,a)=>{if(t.length>0){const r=t.split(" ");return r.length>a?r.slice(0,a).join(" ")+"...":t}else return""},_=()=>{p.visit("/admin/articles/create")},k=t=>{p.visit("/admin/articles/"+t+"/edit")},R=async t=>{(await m.delete("/admin/articles/"+t)).data.status==="deleted"&&d()};return e.jsxs(E,{user:h.user,children:[e.jsx(A,{title:"User Management"}),v,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md\r
					sm:w-[740px]\r
					md:w-[990px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Articles"}),e.jsxs("div",{children:[e.jsxs(f,{dataSource:j,loading:w,rowKey:t=>t.article_id,pagination:!1,children:[e.jsx(n,{title:"Id",dataIndex:"article_id"}),e.jsx(n,{title:"Title",dataIndex:"title"},"title"),e.jsx(n,{title:"Excerpt",dataIndex:"excerpt",render:t=>e.jsx("span",{children:t?C(t,10):""})},"excerpt"),e.jsx(n,{title:"Author",dataIndex:"author",render:(t,a)=>{var r,x,u;return e.jsxs(e.Fragment,{children:[(r=a.author)!=null&&r.lname?((x=a.author)==null?void 0:x.lname)+",":""," ",(u=a.author)==null?void 0:u.fname]})}},"author"),e.jsx(n,{title:"Active",dataIndex:"active",render:(t,a)=>a?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(n,{title:"Featured",dataIndex:"is_featured",render:t=>t?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"is_featured"),e.jsx(n,{title:"Action",render:(t,a)=>e.jsxs(T,{size:"small",children:[e.jsx(o,{shape:"circle",icon:e.jsx(D,{}),onClick:()=>k(a.article_id)}),e.jsx(o,{danger:!0,shape:"circle",onClick:()=>M.confirm({title:"Delete?",icon:e.jsx(P,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){R(a.article_id)}}),icon:e.jsx(B,{})})]})},"action")]}),e.jsx(Y,{className:"mt-4",onChange:I,defaultCurrent:1,total:N}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(o,{className:"ml-auto",shape:"round",icon:e.jsx(O,{}),type:"primary",onClick:_,children:"New"})})]})]})})]})}export{ee as default};
