import{r as s,j as e,Y as F,a as m,y as p}from"./app-BI8Ne9ff.js";import{A as R}from"./AuthenticatedLayout-BYac364X.js";import{F as E,R as P}from"./index-ByQfiS-7.js";import{s as $,M as T}from"./index-yb4ZVewy.js";import{F as h,S as D,R as M,P as Y,a as O}from"./Table-6aMC2VZp.js";import{B as o}from"./button-DeaQzerq.js";import{R as B}from"./useForceUpdate-Cd51SA6V.js";import"./ApplicationLogo-CXeGTjJ0.js";import"./transition-lu4uRQEx.js";import"./index-B5fXJA0Y.js";const{Column:n}=h;function ee({auth:f}){E.useForm();const[j,g]=s.useState([]),[w,i]=s.useState(!1),[y,L]=s.useState(0),[c,N]=s.useState(10),[l,S]=s.useState(1),[_,U]=s.useState("");s.useState({}),s.useState(0);const d=async()=>{i(!0);const t=[`perpage=${c}`,`page=${l}`].join("&");try{const a=await m.get(`/admin/get-articles?${t}`);g(a.data.data),i(!1)}catch{i(!1)}};s.useEffect(()=>{d()},[c,_,l]);const I=(t,a)=>{S(t),N(a)},[z,b]=$.useNotification(),v=(t,a)=>{if(t.length>0){const r=t.split(" ");return r.length>a?r.slice(0,a).join(" ")+"...":t}else return""},C=()=>{p.visit("/admin/articles/create")},k=t=>{p.visit("/admin/articles/"+t+"/edit")},A=async t=>{(await m.delete("/admin/articles/"+t)).data.status==="deleted"&&d()};return e.jsxs(R,{user:f.user,children:[e.jsx(F,{title:"User Management"}),b,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md\r
					sm:w-[740px]\r
					md:w-[990px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Articles"}),e.jsxs("div",{children:[e.jsxs(h,{dataSource:j,loading:w,rowKey:t=>t.article_id,pagination:!1,children:[e.jsx(n,{title:"Id",dataIndex:"article_id"}),e.jsx(n,{title:"Author",dataIndex:"author",render:(t,a)=>{var r;return e.jsx(e.Fragment,{children:a.academic_year?(r=a.academic_year)==null?void 0:r.academic_year_code:""})}},"author"),e.jsx(n,{title:"Title",dataIndex:"title"},"title"),e.jsx(n,{title:"Excerpt",dataIndex:"excerpt",render:t=>e.jsx("span",{children:t?v(t,10):""})},"excerpt"),e.jsx(n,{title:"Author",dataIndex:"author",render:(t,a)=>{var r,x,u;return e.jsxs(e.Fragment,{children:[(r=a.author)!=null&&r.lname?((x=a.author)==null?void 0:x.lname)+",":""," ",(u=a.author)==null?void 0:u.fname]})}},"author"),e.jsx(n,{title:"Active",dataIndex:"active",render:(t,a)=>a?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(n,{title:"Featured",dataIndex:"is_featured",render:t=>t?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"is_featured"),e.jsx(n,{title:"Action",render:(t,a)=>e.jsxs(D,{size:"small",children:[e.jsx(o,{shape:"circle",icon:e.jsx(M,{}),onClick:()=>k(a.article_id)}),e.jsx(o,{danger:!0,shape:"circle",onClick:()=>T.confirm({title:"Delete?",icon:e.jsx(P,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){A(a.article_id)}}),icon:e.jsx(B,{})})]})},"action")]}),e.jsx(Y,{className:"mt-4",onChange:I,defaultCurrent:1,total:y}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(o,{className:"ml-auto",shape:"round",icon:e.jsx(O,{}),type:"primary",onClick:C,children:"New"})})]})]})})]})}export{ee as default};
