import{r as s,j as e,Y as U,a as r}from"./app-CzuViuCp.js";import{A as B}from"./AuthenticatedLayout-DRS6rfkw.js";import{F as o,R as q}from"./index-CINCekdf.js";import{s as L,M as _,C as z}from"./index-DL7ttQqv.js";import{F as g,S as H,R as K,P as V,a as G}from"./FileAddOutlined-D0MPkBBw.js";import{B as m}from"./button-D7hfL9Ag.js";import{R as J}from"./DeleteOutlined-DWAgdMJ2.js";import{I as j}from"./index-D9GDua4e.js";import"./ApplicationLogo-rT3vg_nV.js";import"./transition-DdLwZoAM.js";import"./EyeOutlined-C5Y5mOys.js";import"./index-DkbX3zFA.js";const{Column:d}=g;function le({auth:v}){const[n]=o.useForm(),[C,I]=s.useState([]),[w,u]=s.useState(!1),[S,N]=s.useState(0),[A,i]=s.useState(!1),[p,b]=s.useState(5),[x,R]=s.useState(1),[k,Q]=s.useState(""),[c,W]=s.useState({}),[f,y]=s.useState(0),l=async()=>{u(!0);const t=[`perpage=${p}`,`search=${k}`,`page=${x}`].join("&");try{const a=await r.get(`/admin/get-academic-years?${t}`);I(a.data.data),N(a.data.total),u(!1)}catch(a){console.log(a)}};s.useEffect(()=>{l()},[p,x]);const F=(t,a)=>{R(t),b(a)},[P,Y]=L.useNotification(),h=(t,a,M)=>{P.info({message:a,description:M,placement:t})},D=async t=>{try{const a=await r.get(`/admin/academic-years/${t}`);n.setFields([{name:"academic_year_code",value:a.data.academic_year_code},{name:"academic_year_description",value:a.data.academic_year_description},{name:"active",value:a.data.active}])}catch(a){console.log(a)}},E=()=>{y(0),i(!0)},T=t=>{y(t),i(!0),D(t)},$=async t=>{(await r.delete("/admin/academic-years/"+t)).data.status==="deleted"&&l()},O=async t=>{if(console.log(t),f>0)try{(await r.put("/admin/academic-years/"+f,t)).data.status==="updated"&&(h("bottomRight","Updated!","User successfully update."),n.resetFields(),i(!1),l())}catch(a){a.response.status}else try{(await r.post("/admin/academic-years",t)).data.status==="saved"&&(h("bottomRight","Saved!","User successfully saved."),n.resetFields(),i(!1),l())}catch(a){a.response.status}};return e.jsxs(B,{user:v.user,children:[e.jsx(U,{title:"User Management"}),Y,e.jsx("div",{className:"flex mt-10 justify-center items-center",children:e.jsxs("div",{className:`p-6 w-full overflow-auto mx-2 bg-white shadow-sm rounded-md
					sm:w-[740px]
					md:w-[990px]`,children:[e.jsx("div",{className:"font-bold mb-4",children:"List of Academic Year"}),e.jsxs("div",{children:[e.jsxs(g,{dataSource:C,loading:w,rowKey:t=>t.academic_year_id,pagination:!1,children:[e.jsx(d,{title:"Id",dataIndex:"academic_year_id"}),e.jsx(d,{title:"Code",dataIndex:"academic_year_code"},"academic_year_code"),e.jsx(d,{title:"Description",dataIndex:"academic_year_description"},"academic_year_description"),e.jsx(d,{title:"Active",dataIndex:"active",render:t=>t?e.jsx("span",{className:"bg-green-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"YES"}):e.jsx("span",{className:"bg-red-600 font-bold text-white text-[10px] px-2 py-1 rounded-full",children:"NO"})},"active"),e.jsx(d,{title:"Action",render:(t,a)=>e.jsxs(H,{size:"small",children:[e.jsx(m,{shape:"circle",icon:e.jsx(K,{}),onClick:()=>T(a.academic_year_id)}),e.jsx(m,{danger:!0,shape:"circle",onClick:()=>_.confirm({title:"Delete?",icon:e.jsx(q,{}),content:"Are you sure you want to delete this data?",okText:"Yes",cancelText:"No",onOk(){$(a.academic_year_id)}}),icon:e.jsx(J,{})})]})},"action")]}),e.jsx(V,{className:"mt-4",onChange:F,defaultCurrent:1,total:S}),e.jsx("div",{className:"flex flex-end mt-2",children:e.jsx(m,{className:"ml-auto",type:"primary",icon:e.jsx(G,{}),onClick:E,children:"New"})})]})]})}),e.jsxs(_,{open:A,title:"ACADEMIC YEAR INFORMATION",okText:"Save",cancelText:"Cancel",okButtonProps:{autoFocus:!0,htmlType:"submit"},onCancel:()=>i(!1),destroyOnClose:!0,modalRender:t=>e.jsx(o,{layout:"vertical",form:n,name:"form_in_modal",autoComplete:"off",initialValues:{academic_year_code:"",academic_year_desctiption:"",active:!0},clearOnDestroy:!0,onFinish:a=>O(a),children:t}),children:[e.jsx(o.Item,{name:"academic_year_code",label:"Academic Year Code",validateStatus:c.academic_year_code?"error":"",help:c.academic_year_code?c.academic_year_code[0]:"",rules:[{required:!0,message:"Please input academic year code!"}],children:e.jsx(j,{placeholder:"Academic Year Code"})}),e.jsx(o.Item,{name:"academic_year_description",label:"Academic Year Description",validateStatus:c.academic_year_description?"error":"",help:c.academic_year_description?c.academic_year_description[0]:"",rules:[{required:!0,message:"Please input academic year description!"}],children:e.jsx(j,{placeholder:"Academic Year Description"})}),e.jsx(o.Item,{name:"active",valuePropName:"checked",children:e.jsx(z,{children:"Active"})})]})]})}export{le as default};
